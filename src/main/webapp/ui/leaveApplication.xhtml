<ui:composition
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:p="http://primefaces.org/ui"
  template="/WEB-INF/template.xhtml"
>
  <ui:define name="title">
    Holidays <span class="subitem"> policy configuration</span>
  </ui:define>

  <ui:define name="description">
    Tool provides an Outlook for endusers who is pertinant to operate the
    Visitor pass genereation and pre-approval request process.
  </ui:define>

  <ui:param name="documentationLink" value="/components/schedule" />
  <ui:param name="widgetLink" value="Schedule-1" />

  <ui:define name="implementation">
    <h:form id="holidayForm">
      <p:growl id="messages" showDetail="true" />

      <div class="card">
        <h5>Holiday Details</h5>
        <p:commandButton value="Add New Holiday" icon="pi pi-plus" onclick="PF('holidayDialog').show();" />
        <p:dataTable
          id="holidaysTable"
          var="holiday"
          value="#{leaveTypeController.holidays}"
        >
          <p:column headerText="Holiday Name">
            <h:outputText value="#{holiday.holidayName}" />
          </p:column>
          <p:column headerText="Holiday Date">
            <h:outputText value="#{holiday.holidayDate}" />
          </p:column>
          <p:column headerText="Description">
            <h:outputText value="#{holiday.holidayDescription}" />
          </p:column>
          <p:column headerText="Year">
            <h:outputText value="#{holiday.holidayYear}" />
          </p:column>
          <p:column headerText="Type">
            <h:outputText value="#{holiday.holidayType}" />
          </p:column>
          <p:column headerText="Applicable For">
            <p:dataTable
              var="shift"
              value="#{holiday.applicableFor}"
              styleClass="nested-table"
            >
              <p:column headerText="Shift Name">
                <h:outputText value="#{shift.shiftName}" />
              </p:column>
            </p:dataTable>
          </p:column>
          <p:column headerText="Reminder Before">
            <h:outputText value="#{holiday.reminderBefore}" />
          </p:column>
          <!-- Edit and Delete buttons -->
          <p:column headerText="Actions">
            <p:commandButton
              icon="pi pi-pencil" styleClass="edit-button rounded-button ui-button-success"
              oncomplete="PF('holidayDialog').show();"
              update=":holidayForm:holidayDialogForm"
            />
            <p:spacer width="10" />
            <p:commandButton
              icon="pi pi-trash"  class="ui-button-warning rounded-button"
              action="#{leaveTypeController.deleteHoliday(holiday)}"
            />
          </p:column>
        </p:dataTable>

        <!-- Edit Holiday Dialog -->
        <p:dialog id="holidayDialog" widgetVar="holidayDialog" modal="true">
          <h:form id="holidayDialogForm">
            <h:panelGrid columns="2" cellpadding="5">
              <h:outputLabel for="holidayName" value="Holiday Name:" />
              <p:inputText
                id="holidayName"
                value="#{leaveTypeController.holiday.holidayName}"
              />

              <h:outputLabel for="holidayDate" value="Holiday Date:" />
              <p:calendar
                id="holidayDate"
                value="#{leaveTypeController.holiday.holidayDate}"
                showOn="button"
              />

              <h:outputLabel for="holidayDescription" value="Description:" />
              <p:inputText
                id="holidayDescription"
                value="#{leaveTypeController.holiday.holidayDescription}"
              />

              <h:outputLabel for="holidayYear" value="Year:" />
              <p:spinner
                id="holidayYear"
                value="#{leaveTypeController.holiday.holidayYear}"
              />

              <h:outputLabel for="holidayType" value="Type:" />
              <p:inputText
                id="holidayType"
                value="#{leaveTypeController.holiday.holidayType}"
              />

              <h:outputLabel for="reminderBefore" value="Reminder Before:" />
              <p:spinner
                id="reminderBefore"
                value="#{leaveTypeController.holiday.reminderBefore}"
              />

              <h:outputLabel for="applicableFor" value="Applicable For:" />
              <p:inputText
                id="applicableFor"
                value=""
              />

              <p:commandButton
                value="Save"
                action="#{leaveTypeController.saveHoliday}"
                update=":holidayForm:holidaysTable"
              />
              <p:commandButton
                value="Cancel"
                onclick="PF('holidayDialog').hide();"
              />
            </h:panelGrid>
          </h:form>
        </p:dialog>
      </div>
    </h:form>
  </ui:define>
</ui:composition>
